# Cristal Match Demo

AIベースのプロジェクトマッチングシステムのデモアプリケーションです。ユーザーのスキルや希望に基づいて最適なプロジェクトをマッチングし、専属のAIエージェントがサポートします。

## 主な機能

### ✨ 実装済み機能

1. **プロジェクト管理**
   - プロジェクト一覧表示
   - プロジェクト詳細表示
   - 要件定義書の閲覧
   - チーム構成の表示

2. **AIエージェント面接**
   - 専属AIエージェントによる自動面接
   - リアルタイムの会話生成
   - 適性スコアリング
   - 面接結果の保存

3. **タスク管理**
   - WBS・ガントチャート表示
   - タスクの自動割り当て（AI）
   - タスク進捗の更新
   - プロジェクト統計の表示

4. **AI自動実行（モック）**
   - セキュリティ監査の自動実行
   - テスト・品質保証の自動実行
   - リアルタイム進捗表示
   - 実行ログの記録

5. **ユーザープロフィール管理**
   - スキル管理
   - 興味のある業界設定
   - 希望条件の編集
   - 参加プロジェクト一覧
   - 割り当てタスク一覧

6. **ユーザーロール管理**
   - PM（プロジェクトマネージャー）とメンバーの区別
   - 役割ベースのUI表示制御
   - チーム構成の管理

## 技術スタック

- **フロントエンド**: Next.js 16 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS v4
- **UIコンポーネント**: Radix UI + shadcn/ui
- **データベース**: PostgreSQL
- **ORM**: Prisma
- **アイコン**: Lucide React

## セットアップ

### 必要な環境

- Node.js 18以上
- PostgreSQL 14以上
- npm または yarn

### インストール手順

1. **リポジトリのクローン**
   ```bash
   git clone <repository-url>
   cd cristal-match-demo
   ```

2. **依存パッケージのインストール**
   ```bash
   npm install
   ```

3. **環境変数の設定**

   `.env.local` ファイルを作成し、以下を設定:
   ```env
   DATABASE_URL="postgresql://cristal:cristal_dev_password@localhost:5432/cristal_match"
   ```

4. **データベースのセットアップ**

   PostgreSQLデータベースとユーザーを作成:
   ```bash
   # PostgreSQLに接続
   psql -U postgres

   # データベースとユーザーを作成
   CREATE DATABASE cristal_match;
   CREATE USER cristal WITH PASSWORD 'cristal_dev_password';
   GRANT ALL PRIVILEGES ON DATABASE cristal_match TO cristal;
   ```

5. **Prismaマイグレーションの実行**
   ```bash
   npx prisma migrate dev
   ```

6. **シードデータの投入**
   ```bash
   npm run seed
   ```

7. **開発サーバーの起動**
   ```bash
   npm run dev
   ```

8. ブラウザで http://localhost:3000 にアクセス

## 使い方

### ユーザー切り替え

ヘッダー右上のドロップダウンから異なるユーザーに切り替えられます。

**PMユーザー（3名）:**
- 木村 健一 - 医療系プロジェクト担当
- 松本 美紀 - 金融系プロジェクト担当
- 小林 拓也 - AI系プロジェクト担当

**メンバーユーザー（8名）:**
- 田中 太郎、佐藤 花子、鈴木 一郎、高橋 美咲、山田 健太、伊藤 結衣、渡辺 翔太、中村 愛

### プロジェクト機能

1. **プロジェクト一覧**
   - トップページまたは「プロジェクト」メニューから閲覧
   - プロジェクトカードをクリックして詳細を表示

2. **AIエージェント面接**
   - プロジェクト詳細ページの「AIエージェント面接を開始」ボタンをクリック
   - 自動生成される質問に回答（エンターキーで送信）
   - 面接完了後、適性スコアが表示されます

3. **タスク自動割り当て**
   - PMユーザーでログイン
   - プロジェクト詳細ページの「タスクを自動割り当て」ボタンをクリック
   - AIが最適なメンバーにタスクを割り当てます

4. **タスク進捗更新**
   - タスクが割り当てられているユーザーでログイン
   - プロジェクト詳細ページのタスク一覧から「進捗更新」ボタンをクリック
   - スライダーで進捗率を調整して保存

5. **AI自動実行**
   - PMユーザーでログイン
   - 「医療ポータルシステム開発」プロジェクトを開く
   - 「セキュリティ監査」または「テスト・品質保証」タスクの「AI自動実行」ボタンをクリック
   - リアルタイムで実行状況を確認

6. **プロフィール管理**
   - ヘッダーの「プロフィール」メニューをクリック
   - 「プロフィールを編集」ボタンから情報を更新
   - スキルや興味のある業界を追加・削除

### デモシナリオ

#### シナリオ1: 新規プロジェクトへの参加

1. メンバーユーザー（例: 田中 太郎）でログイン
2. プロジェクト一覧から「AIカスタマーサポートチャットボット開発」を選択
3. 「AIエージェント面接を開始」をクリック
4. 質問に答えて面接を完了
5. 適性スコアを確認

#### シナリオ2: タスクの進捗管理（PM視点）

1. PMユーザー（例: 木村 健一）でログイン
2. 「医療ポータルシステム開発」プロジェクトを開く
3. 「タスクを自動割り当て」で未割り当てタスクを配分
4. ガントチャートでプロジェクト全体の進捗を確認
5. プロジェクト統計で遅延タスクを確認

#### シナリオ3: タスクの実行（メンバー視点）

1. メンバーユーザー（例: 田中 太郎）でログイン
2. 割り当てられたタスクの「進捗更新」をクリック
3. 進捗率を更新（例: 0% → 50%）
4. プロフィールページで自分の担当タスク一覧を確認

#### シナリオ4: AI自動実行

1. PMユーザー（例: 木村 健一）でログイン
2. 「医療ポータルシステム開発」プロジェクトを開く
3. 「セキュリティ監査」タスクの「AI自動実行」ボタンをクリック
4. 実行開始し、リアルタイムで進捗を確認
5. 完了後、タスクが自動的に完了状態になることを確認

## プロジェクト構成

```
cristal-match-demo/
├── app/                      # Next.js App Router
│   ├── api/                  # APIエンドポイント
│   │   ├── interviews/       # 面接API
│   │   ├── projects/         # プロジェクトAPI
│   │   ├── tasks/            # タスクAPI
│   │   └── users/            # ユーザーAPI
│   ├── interviews/           # 面接ページ
│   ├── profile/              # プロフィールページ
│   ├── projects/             # プロジェクトページ
│   ├── layout.tsx            # ルートレイアウト
│   └── page.tsx              # トップページ
├── components/               # Reactコンポーネント
│   ├── ui/                   # UIコンポーネント（shadcn/ui）
│   ├── gantt-chart.tsx       # ガントチャート
│   ├── header.tsx            # ヘッダー
│   ├── interview-dialog.tsx  # 面接ダイアログ
│   ├── profile-edit-dialog.tsx # プロフィール編集
│   ├── task-assignment-dialog.tsx # タスク割り当て
│   ├── task-auto-executor.tsx # AI自動実行
│   ├── task-progress-updater.tsx # 進捗更新
│   └── user-context.tsx      # ユーザーコンテキスト
├── doc/                      # ドキュメント
│   └── tasks/                # タスク仕様書
├── lib/                      # ユーティリティ
│   ├── prisma.ts             # Prismaクライアント
│   └── utils.ts              # 汎用ユーティリティ
├── prisma/                   # Prisma設定
│   ├── schema.prisma         # データベーススキーマ
│   └── seed.ts               # シードデータ
└── public/                   # 静的ファイル
```

## データモデル

### 主要なモデル

- **User**: ユーザー情報（スキル、希望条件、ロール）
- **Agent**: AIエージェント（ユーザー/プロジェクト専属）
- **Project**: プロジェクト情報（要件定義書、ステータス）
- **Task**: タスク情報（進捗、日程、自動実行フラグ）
- **Interview**: 面接記録（会話ログ、スコア）
- **TeamMember**: チーム構成（プロジェクトとユーザーの関連）

詳細は [prisma/schema.prisma](prisma/schema.prisma) を参照してください。

## 開発コマンド

```bash
# 開発サーバー起動
npm run dev

# ビルド
npm run build

# 本番サーバー起動
npm start

# Prismaマイグレーション生成
npx prisma migrate dev --name <migration-name>

# Prisma Studio（DBビューアー）起動
npx prisma studio

# シードデータ再投入
npm run seed

# 型チェック
npx tsc --noEmit
```

## 今後の拡張案

- **リアルタイムチャット**: プロジェクトメンバー間のコミュニケーション
- **通知機能**: タスク割り当てや進捗更新の通知
- **レポート機能**: プロジェクトの進捗レポート自動生成
- **カレンダー連携**: タスクのスケジュール管理
- **ファイル共有**: プロジェクト関連ドキュメントの共有
- **実際のAI統合**: OpenAI/Claude APIとの連携

## ライセンス

MIT

## 作成者

Claude Code
