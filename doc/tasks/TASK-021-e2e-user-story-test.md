# TASK-021: E2Eユーザーストーリーテスト

## 目的
実装した全機能が統合され、ユーザーパターンとPMパターンのストーリーが最初から最後まで実行できることを確認する

## ユーザーパターン - テストシナリオ

### 1. ユーザー登録
- [ ] 新規ユーザー登録ページにアクセス
- [ ] 名前、メール、スキル、興味のある業界を入力
- [ ] 登録ボタンをクリック
- [ ] 専属AIエージェントが自動生成されることを確認
- [ ] ダッシュボードにリダイレクトされることを確認

**期待結果**: ユーザーと専属エージェントが作成され、ログイン状態になる

### 2. エージェント間自動面接
- [ ] プロジェクト一覧（全プロジェクト）ページにアクセス
- [ ] 興味のあるプロジェクトを選択
- [ ] 「面接を申し込む」ボタンをクリック
- [ ] バックグラウンドで自動面接が実行される
- [ ] 面接完了通知が表示される

**期待結果**: ユーザーエージェントとプロジェクトエージェント間で自動会話が行われ、面接結果が保存される

### 3. オファー確認
- [ ] 「オファー」メニューにアクセス
- [ ] 面接結果がPASSEDのプロジェクトのオファーが表示される
- [ ] 会話ログを確認できる
- [ ] マッチングスコアが表示される

**期待結果**: 合格したプロジェクトのオファーが一覧表示される

### 4. プロジェクト参加決定
- [ ] オファーの「詳細を見る」をクリック
- [ ] プロジェクトの要件定義、チーム構成、WBSを確認
- [ ] 「オファーを承諾」ボタンをクリック
- [ ] 確認ダイアログで承諾を確定
- [ ] プロジェクト一覧に参加プロジェクトが表示される

**期待結果**: TeamMemberレコードが作成され、プロジェクトに参加できる

### 5. タスク実行とエージェントサポート
- [ ] プロジェクト詳細ページでWBSを確認
- [ ] 自分に割り当てられたタスクを選択
- [ ] タスク詳細ページでタスクエージェントとチャット
- [ ] エージェントからのアドバイスを受ける
- [ ] タスクを実行し、進捗を更新

**期待結果**: タスクエージェントとの会話が保存され、進捗が更新される

### 6. タスク完了
- [ ] 進捗を100%に更新
- [ ] タスクステータスが「完了」になることを確認
- [ ] タスクエージェントからプロジェクトエージェントに報告が送信される
- [ ] プロジェクト統計が更新される

**期待結果**: タスクが完了し、プロジェクト全体の進捗に反映される

---

## PMパターン - テストシナリオ

### 1. プロジェクト作成
- [ ] PMユーザーでログイン
- [ ] 「新規プロジェクト作成」ページにアクセス
- [ ] プロジェクト名、説明を入力
- [ ] Markdownエディタで要件定義書を作成
- [ ] 「プロジェクト作成」ボタンをクリック
- [ ] プロジェクト専属エージェントが自動生成される

**期待結果**: プロジェクトとプロジェクトエージェントが作成される

### 2. WBS・ガントチャート自動生成
- [ ] プロジェクト詳細ページにリダイレクト
- [ ] 「タスクを自動生成」ボタンをクリック
- [ ] 要件定義からタスクが生成される
- [ ] 各タスクに専属エージェントが作成される
- [ ] ガントチャートが表示される
- [ ] タスクの開始日・終了日が自動設定される

**期待結果**: 要件定義に基づいたWBSとガントチャートが生成される

### 3. 面接結果確認
- [ ] プロジェクト詳細ページの「面接結果」タブを表示
- [ ] 面接を受けたユーザーの一覧が表示される
- [ ] 合格（PASSED）したユーザーを確認
- [ ] 各ユーザーの面接会話ログを確認
- [ ] マッチングスコアを確認

**期待結果**: 面接結果とユーザー情報が確認できる

### 4. プロジェクト開始
- [ ] メンバーが十分揃ったことを確認
- [ ] プロジェクトステータスを「進行中」に変更
- [ ] チームメンバー一覧が更新される

**期待結果**: プロジェクトが「進行中」になり、メンバーが表示される

### 5. タスク自動割り当て
- [ ] 「タスクを自動割り当て」ボタンをクリック
- [ ] プロジェクトエージェントが各ユーザーのスキルを分析
- [ ] 最適なタスクが各メンバーに割り当てられる
- [ ] AI実行可能タスクにはエージェントのみ割り当て
- [ ] WBSが更新される

**期待結果**: 全タスクが適切なメンバーまたはエージェントに割り当てられる

### 6. タスク状況確認とPMへの通知
- [ ] プロジェクト詳細ページで各タスクの報告を確認
- [ ] タスクエージェントからの進捗報告が表示される
- [ ] 遅延タスクの警告が通知される
- [ ] 課題が発生したタスクの詳細を確認

**期待結果**: タスクエージェントからの報告が集約され、PMに通知される

### 7. プロジェクトエージェントとの会話
- [ ] プロジェクト詳細ページのチャットエリアを開く
- [ ] プロジェクトエージェントに状況を質問
- [ ] エージェントから進捗サマリーを受け取る
- [ ] 課題への対処方法を相談
- [ ] エージェントの提案を受けて調整を実施

**期待結果**: PMがプロジェクトエージェントと会話し、プロジェクト調整ができる

### 8. プロジェクト完了
- [ ] 全タスクの進捗が100%になることを確認
- [ ] プロジェクトステータスが「完了」に自動更新される
- [ ] プロジェクト完了通知が表示される

**期待結果**: 全タスク完了時にプロジェクトが完了状態になる

### 9. AIエージェントバンクへの登録
- [ ] プロジェクト完了後、自動でエージェント登録処理が実行される
- [ ] プロジェクトエージェントがバンクに登録される
- [ ] 各タスクエージェントがバンクに登録される
- [ ] 実績データ（完了率、スコアなど）が保存される
- [ ] 「エージェントバンク」ページで登録を確認

**期待結果**: プロジェクト完了時に全エージェントが自動的にバンクに登録される

---

## 統合テスト項目

### データフロー確認
- [ ] ユーザー登録 → エージェント生成の連携
- [ ] プロジェクト作成 → タスク生成 → エージェント生成の連携
- [ ] 面接実施 → オファー生成の連携
- [ ] オファー承諾 → チームメンバー追加の連携
- [ ] タスク進捗更新 → 報告生成 → 通知の連携
- [ ] プロジェクト完了 → エージェントバンク登録の連携

### UI/UX確認
- [ ] 全ページでローディング状態が適切に表示される
- [ ] エラーメッセージが分かりやすく表示される
- [ ] 成功時の通知が表示される
- [ ] ナビゲーションが直感的で分かりやすい
- [ ] モバイル表示でも問題なく操作できる

### パフォーマンス確認
- [ ] ページ読み込みが2秒以内
- [ ] エージェント間会話の生成が5秒以内
- [ ] タスク自動生成が10秒以内
- [ ] チャット応答が2秒以内

## 完了条件

- [ ] ユーザーパターンの全ステップが問題なく実行できる
- [ ] PMパターンの全ステップが問題なく実行できる
- [ ] データフローの整合性が保たれている
- [ ] UI/UXが洗練されている
- [ ] パフォーマンスが許容範囲内

## テスト実施手順

1. データベースをリセット
2. PMユーザーでログインしてプロジェクト作成
3. 新規ユーザーを登録
4. ユーザーパターンを最初から最後まで実行
5. PMパターンを最初から最後まで実行
6. 全項目をチェック
7. 問題があれば該当チケットに戻って修正

## プロジェクト最終完了
このチケットが完了したら、デモアプリケーション完成
